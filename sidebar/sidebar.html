<template x-if="accessToken">
  <div class="sidebar p-4 bg-gray-50 border-r border-gray-200 overflow-y-auto flex flex-col h-full">
    
    <!-- ÐÐ°Ð·Ð²Ð° Ñ€Ð¾Ð·Ð´Ñ–Ð»Ñƒ -->
    <h2 class="text-xl font-bold mb-4 text-indigo-700">Rooms</h2>

    <!-- ðŸ”¹ Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÑ–Ð¼Ð½Ð°Ñ‚ -->
    <ul class="sidebar-list">
      <template x-for="room in rooms" :key="room.roomId">
        <li
          @click="switchRoom(room.roomId)"
          :class="{
            'bg-indigo-200 font-semibold': room.roomId === roomId,
            'hover:bg-indigo-100': room.roomId !== roomId
          }"
          class="cursor-pointer rounded-lg px-3 py-1 transition"
          x-text="room.name || room.roomId"
        ></li>
      </template>
    </ul>

    <!-- ðŸ”¹ Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð½Ñ Ð½Ð¾Ð²Ð¾Ñ— ÐºÑ–Ð¼Ð½Ð°Ñ‚Ð¸ -->
    <div class="mt-auto border-t pt-4">
      <h3 class="font-semibold text-gray-700 mb-2">Create new room</h3>
      <input
        x-model="newRoomName"
        placeholder="New room name"
        class="border p-2 w-full mb-2 rounded"
      >
      <button
        @click="createRoom()"
        class="bg-indigo-500 text-white p-2 w-full rounded hover:bg-indigo-600 transition"
      >
        Create Room
      </button>
      <p x-show="newRoomId" class="text-sm text-gray-600 mt-1">
        Room ID: <span x-text="newRoomId"></span>
      </p>
    </div>

    <!-- ðŸ”¹ Ð¡Ð¿Ð¸ÑÐ¾Ðº ÐºÐ¾Ñ€Ð¸ÑÑ‚ÑƒÐ²Ð°Ñ‡Ñ–Ð² ÐºÑ–Ð¼Ð½Ð°Ñ‚Ð¸ -->
    <div class="mt-6 border-t pt-4">
      <h3 class="text-lg font-semibold mb-2 text-gray-700">Members</h3>
      <template x-if="roomMembers && roomMembers.length > 0">
        <ul class="space-y-1">
          <template x-for="member in roomMembers" :key="member.user_id">
            <li class="flex items-center text-sm text-gray-800 bg-gray-100 rounded px-2 py-1">
              <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
              <span x-text="member.displayname || member.user_id"></span>
            </li>
          </template>
        </ul>
      </template>
      <template x-if="!roomMembers || roomMembers.length === 0">
        <p class="text-sm text-gray-500 italic">No members found</p>
      </template>
    </div>

  </div>
</template>

