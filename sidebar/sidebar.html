<template x-if="accessToken">
  <div class="sidebar p-4 bg-gray-50 border-r border-gray-200 flex flex-col h-full">

    <h2 class="text-xl font-bold mb-4 text-indigo-700">Rooms</h2>

    
    <ul class="sidebar-list">
      <template x-for="room in rooms" :key="room.roomId">
        <li
          class="cursor-pointer rounded-lg px-3 py-1 transition border border-transparent"
          @click="switchRoom(room.roomId)"
          :class="{
            'bg-indigo-200 border-indigo-400 font-semibold': room.roomId === roomId,
            'hover:bg-indigo-100': room.roomId !== roomId
          }"
        >

          
          <span x-text="room.name || room.roomId"></span>

          
          <template x-if="room.roomId === roomId">
            <div class="flex space-x-2 mt-1">

              <button
                @click.stop="startRoomRename(room.roomId, room.name)"
                class="text-xs text-blue-600 hover:underline">
                Rename
              </button>

              <button
                @click.stop="deleteRoom(room.roomId)"
                class="text-xs text-red-600 hover:underline">
                Delete
              </button>

            </div>
          </template>

        </li>
      </template>

    </ul>


    
    <div
      x-show="renameRoomMode"
      class="mt-4 p-3 bg-white border rounded shadow-md"
    >
      <h3 class="font-semibold text-gray-700 mb-2 text-sm">Rename room</h3>

      <input
        x-model="renameRoomText"
        class="border p-2 w-full mb-2 rounded text-sm"
        placeholder="New room name"
      >

      <div class="flex space-x-2">
        <button
          @click="confirmRoomRename()"
          class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">
          Save
        </button>

        <button
          @click="cancelRoomRename()"
          class="bg-gray-300 px-3 py-1 rounded text-sm hover:bg-gray-400">
          Cancel
        </button>
      </div>
    </div>


    <div class="mt-4 border-t pt-4">
      <h3 class="font-semibold text-gray-700 mb-2">Create new room</h3>

      <input
        x-model="newRoomName"
        placeholder="New room name"
        class="border p-2 w-full mb-2 rounded"
      >

      <button
        @click="createRoom()"
        class="bg-indigo-500 text-white p-2 w-full rounded hover:bg-indigo-600 transition">
        Create Room
      </button>

      <p x-show="newRoomId" class="text-sm text-gray-600 mt-1">
        Room ID: <span x-text="newRoomId"></span>
      </p>
    </div>

  </div>
</template>


